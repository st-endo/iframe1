<!DOCTYPE html>
<html>
<head>
    <title>サイトA</title>
    <script>
        window.addEventListener('DOMContentLoaded', (event) => {
            console.log(1);
            const iframes = document.querySelectorAll('iframe');
            iframes.forEach(iframe => {
                iframe.addEventListener('load', function() {
                    const specialElementId = this.getAttribute('data-element-id');
                    this.contentWindow.postMessage(specialElementId, '*');
                });
            });
            console.log(1.5);
        });

        window.addEventListener('message', function(event) {
            console.log(3, event);
            const data = event.data;
            if (typeof data === 'object' && data !== null && 'id' in data && 'height' in data) {
                const iframe = document.querySelector(`#${data.id}`);
                if (iframe) {
                    iframe.style.height = `${data.height}px`;
                }
            }
        }, false);
    </script>
</head>
<body>
    <!-- <iframe id="frame1" data-element-id="btn1" src="http://localhost:8080/hoge.html"></iframe> -->
    <iframe id="frame1" data-element-id="btn1" src="http://localhost:8081"></iframe>
</body>
</html>
