<!DOCTYPE html>
<html>
<head>
    <title>サイトA</title>
    <script>
        window.addEventListener('DOMContentLoaded', (event) => {
            const iframes = document.querySelectorAll('iframe');
            iframes.forEach(iframe => {
                iframe.addEventListener('load', function() {
                    const specialElementId = this.getAttribute('data-element-id');
                    const frameId = this.getAttribute('id');
                    this.contentWindow.postMessage({ specialElementId, frameId }, '*');
                });
            });
        });

        window.addEventListener('message', function(event) {
            const data = event.data;
            if (typeof data === 'object' && data !== null && 'id' in data && 'rect' in data) {
                const iframe = document.querySelector(`#${data.id}`);
                if (iframe) {
                    const div = document.createElement('div');
                    div.style.width = '200px';
                    div.style.height = '200px';
                    div.style.background = 'red';
                    div.style.position = 'absolute';
                    div.style.left = `${data.rect.right + iframe.offsetLeft}px`;
                    div.style.top = `${data.rect.top + iframe.offsetTop}px`;
                    document.body.appendChild(div);
                }
            }
        }, false);
    </script>
</head>
<body>
    <iframe id="frame1" data-element-id="btn1" src="http://localhost:8081" style="position:relative;"></iframe>
</body>
</html>
